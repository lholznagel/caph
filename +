<template>
  <div>
    <v-card>
      <v-card-title>Add mission</v-card-title>

      <v-card-text>
        <v-form v-model="valid">
          <v-container>
            <v-row>
              <v-col cols="12" md="4">
                <v-select
                  v-model="selectedMissionLevel"
                  :items="missionLevels"
                  required />
              </v-col>
              <v-col cols="12" md="4">
                <v-select
                  v-model="selectedMissionType"
                  :items="missionTypes"
                  required />
              </v-col>
              <v-col cols="12" md="4">
                <v-select
                  v-model="selectedMissioName"
                  :items="missionNames"
                  required />
              </v-col>
            </v-row>
          </v-container>
        </v-form>
      </v-card-text>

      <v-card-actions>
        <v-spacer></v-spacer>

        <v-btn color="primary" plain>
          Add
        </v-btn>
      </v-card-actions>
    </v-card>
  </div>
</template>

<script lang="ts">
import { Component, Vue } from 'vue-property-decorator';

@Component
export default class AddMission extends Vue {
  public missionLevels: ISelect[] = [
    { text: 'Level 1', value: 'LEVEL_1' },
    { text: 'Level 2', value: 'LEVEL_2' },
    { text: 'Level 3', value: 'LEVEL_3' },
    { text: 'Level 4', value: 'LEVEL_4' },
    { text: 'Level 5', value: 'LEVEL_5' },
  ];
  public missionTypes: ISelect[] = [
    { text: 'Mining', value: 'MINING' },
    { text: 'Security', value: 'SECURITY' },
  ];
  public missionNames: ISelect[] = [
    {
      text:  'Helmut und die Barbaren',
      value: 'HELMUT_UND_DIE_BARBAREN',
      level: 'LEVEL_5',
      type:  'SECURITY',
    },
    {
      text:  'Herbert regelt mal wieder',
      value: 'HERBERT_REGELT_MAL_WIEDER',
      level: 'LEVEL_3',
      type:  'MINING',
    },
  ];
  public selectableMissions: ISelect[] = [];

  public selectedMissionLevel: string = 'LEVEL_1';
  public selectedMissionType:  string = 'MINING';
  public selectedMissionName:  string = '';

  public valid: boolean = false;

  public filterNames() {
    this.selectableMissions = this.missionNames
      .filter(x => x.level === this.selectedMissionLevel)
      .filter(x => x.type  === this.selectedMissionType);
  }
}

interface ISelect {
  text:   string;
  value:  string;
  level?: string;
  type?:  string;
}
</script>
